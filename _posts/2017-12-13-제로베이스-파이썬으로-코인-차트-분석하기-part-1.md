---
layout: post
title: '분석 제로베이스 개발자 파이썬으로 코인 차트 분석하기 (Part1)'
author: 이재연
image: /static/covers/bitcoin.jpg
date: 2017-12-13
tags: [python]
draft: true
---

## 시작하기 앞서

안녕하세요. Flative의 이재연 입니다.

요즘 비트코인 얘기 안하는 사람을 찾기가 힘듭니다. 지하철에서도 길에도 회사에서도 비트코인 얘기뿐입니다. 네이버 실시간 검색어에는 각종 거래소와 신종 코인 이름이 올라오구요. 규제를 한다 안한다를 논하는 기사글과 거래소를 고소한다 안한다 얘기하는 글들도 쉽게 볼 수 있습니다. 저는 상당히 예전부터 비트코인을 있었고 나름 투자도 빨리 시작했지만 역시 똥손답게 원금대비 -20만원의 손실을 자랑하고 있습니다. ㅎㅎ

그래서! 똥손 탈출을 위한 차트 분석 스터디와 봇 스터디를 시작합니다.

막해보는 첫번째 프로젝트 시작

## 시작

### Jupyter? 아니면 Pycharm?

jupyter 라면 다들 한번씩을 들어보셨을텐데요. 사실 전 잘 모릅니다. 단순히 파이썬 말고도 여러 언어 환경을 독립적으로 구축해놓고 각 환경을 필요에 따라 자유롭게 쓸 수 있다고만 알고있습니다. 첫번째로 jupyter 를 고려한 이유는 환경 보다는 차트데이터 같은 그래픽 요소들의 지원이 상당히 잘 되어있고 interactive 환경으로 작업을 할 수 가 있다는 점 때문이었습니다.

![코드 예시](/static/images/2017-12-13-제로베이스-파이썬으로-코인-차트-분석하기-part-1/1.png)

![감격의 notebook](/static/images/2017-12-13-제로베이스-파이썬으로-코인-차트-분석하기-part-1/2.png)

마침 집 데스크탑이 항상 켜져있고 리소스도 포터블 맥보다는 좋기때문에 집 데스크탑에 jupyter desktop 설정해두기로 결정

### 차트 데이터 가져오기

많은 리소스들이 있기때문에 따로 적지 않겠습니다.

### csv? rdb? nosql?

두번째 고민은 차트 데이터를 어디다가 저장할것인가?

일반적으로 차트 데이터를 가져오게되면 raw csv 일 확률이 높습니다. pandas 를 사용하는 많은 예제들에서도 실제로 csv 를 많이 사용하고 있습니다. financial data 를 저장하는 방법을 조금 찾아보니 financial data 에 최적화되어있다는 JaguarDB 부터해서 다양한 생소한 데이터베이스들이 많았습니다. 하지만 새로운 기술을 선택해서 **굳이** 러닝커브를 겪을 필요는 없으니 바로 패스. 전 새로운 DB 도 nosql 도 익숙하지 않거든요. 그러면 raw csv 와 rdb 가 후보군으로 남습니다.

두번째로 생각해야할건 차트 데이터 관리입니다. 차트 데이터는 정적이지만 매분 매초마다 새로운 정보가 생기고 있기때문에 가지고있는 차트 데이터를 주기적으로 최신화할 필요가 있습니다. 그래서 저는 raw csv 를 포기합니다. 날짜별로 기록해두고 관리하기도 귀찮을 뿐더러 매번 파싱해야할 데이터가 늘기만 할 것 같아서요. 또한 차트 데이터를 정확히 필요한때에 업데이트를 할 수 없는 경우도 생길수 있습니다. 그러면 문제 파악후 가져오지 못한 데이터를 한꺼번에 가져오는 배치 작업이 생길수있는데, 데이터 API 혹은 데이터 소스가 완벽하게 통제되지 않는한 차트 데이터의 중복 또한 관리를 해야합니다.

그리하여 PostgreSQL 를 사용하기로 결정.

### 구현 방향

차트 데이터는 어차피 지나간 과거의 산물입니다. 미래에 절대적으로 영향을 끼치는 존재가 아니기 때문에 무조건적으로 신뢰 할 수 없습니다. 그렇기에 저는 차트 데이터를 오로지 미래의 데이터를 **예측**하는 용도로 사용 할 것입니다.

아무 지표없이 코인의 가격이 지금보다 오를것인지 내릴것인지는 동전던지기와 다름이 없습니다. 오르거나, 내리거나, 둘 중 하나니까요. 코인을 산 이후에 코인이 오를 확률이 50% 라고 가정해보겠습니다. 그러면 떨어질 확률도 50% 이므로 별 의미가 없습니다.

과거의 차트데이터에서 통계를 뽑아봤더니 **차트에 음봉이 4개가 뜨고난 후에 80% 확률로 음봉이 뜬다** 라고 결과가 나왔다고 **가정** 해보겠습니다. 그러면 저는 코인을 구매할때에 이전에 음봉 4개가 떳는지를 체크해서 높은 확률로 음봉이 뜨는 경우를 피할 수 있게됩니다. 물론 이런식의 접근이 실제로 어떤 영향을 미칠지는 모르지만 결국 코인이 오를 확률을 조금씩 조금씩 상승시키는 방법이라고 가정을 하고 이렇게 통계적인 조건들을 조금씩 추가하면서 구현을 해볼 예정입니다.
